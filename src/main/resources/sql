CREATE TABLE Person2(
                        id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                        name varchar(30) not null,
                        phone varchar (20) NOT NULL unique,
                        email varchar (35) NOT NULL unique,
                        password varchar (100) NOT NULL,
                        age int,
                        city varchar (30),
                        area varchar (30),
                        postal_code int,
                        country varchar (30),
                        role varchar (10) not null,
                        update_date timestamp (6),
                        registration timestamp (6),
                        isEnabled BOOLEAN DEFAULT(true) not null
);
insert into person2 (name, phone, email, password, registration, role)
values ('Bob', '+375-29-1111111', 'test@mail.com', '$2a$10$UKH6SNv/uETI3Mzo6WJzF.D6nliStRGKvnt8W5XJ29tXiaummgEsC',
        '2022-08-16 14:34:43.755681', 'ADMIN');
/* пароль 123 хэширован*/

CREATE TABLE Delivery(
                         id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                         phone varchar (20) not null,
                         city varchar (30) not null,
                         area varchar (30) not null,
                         postal_code int not null,
                         country varchar (30) not null
);

CREATE TABLE Orders(
                      id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                      costumer_id int REFERENCES Person2(id) NOT NULL,
                      manager_id int REFERENCES Person2(id) NOT NULL,
                      delivery_id int REFERENCES delivery(id) NOT NULL,
                      registration_order timestamp (6),
                      cost_order FLOAT not null
);

CREATE TABLE Type_product(
                             id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
 			     name varchar(30) not null
);

insert into Type_product(name) values('Spare Parts');
insert into Type_product(name) values('Ayurveda');
insert into Type_product(name) values('Jewellery');
insert into Type_product(name) values('Incense');
insert into Type_product(name) values('Bags & Purses');
insert into Type_product(name) values('Books and CDs');
insert into Type_product(name) values('Clothes & Shoes');
insert into Type_product(name) values('Copper products');
insert into Type_product(name) values('Cosmetics');
insert into Type_product(name) values('Fabrics');
insert into Type_product(name) values('Food');
insert into Type_product(name) values('For Animals');
insert into Type_product(name) values('Goods for creativity');
insert into Type_product(name) values('Hemp Products');
insert into Type_product(name) values('Household products');
insert into Type_product(name) values('Kamasutra');
insert into Type_product(name) values('Mobile Phones');
insert into Type_product(name) values('Motorcycles & Bikes');
insert into Type_product(name) values('Musical instruments');
insert into Type_product(name) values('Parfum');
insert into Type_product(name) values('Products for children');
insert into Type_product(name) values('Souvenirs');
insert into Type_product(name) values('Stationery');
insert into Type_product(name) values('Yoga Store');


CREATE TABLE Product(
                        id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                        index varchar(50) not null,
                        type_product int REFERENCES Type_product(id) ON DELETE SET NULL,
                        name varchar (50) NOT NULL,
                        unit varchar (50) NOT NULL,
                        price double precision NOT NULL,
                        country varchar (50) NOT NULL,
                        maker varchar (50) NOT NULL,
                        creation_date timestamp (6) NOT NULL
);
insert into product (index, type_product, name, unit, price, country, maker, creation_date)
values ('4810065006079', '11', 'Молоко сгущеное цельное с сахаром 380гр',  'шт',
        '4.13', 'Республика Беларусь', 'ОАО Рогачевский МКК', '2022-08-16 14:34:43.755681');


CREATE TABLE Basket(
                        id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                        order_id int REFERENCES Orders(id) NOT NULL,
                        product_id int REFERENCES Product(id) NOT NULL,
                        cost FLOAT not null,
                        quantity FLOAT not null,
                        discount int DEFAULT(0)
);


